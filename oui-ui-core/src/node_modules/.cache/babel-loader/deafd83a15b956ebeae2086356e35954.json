{"remainingRequest":"D:\\Project VMODEV\\Horde\\horde-oui\\oui-ui-core\\src\\node_modules\\babel-loader\\lib\\index.js!D:\\Project VMODEV\\Horde\\horde-oui\\oui-ui-core\\src\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\Project VMODEV\\Horde\\horde-oui\\oui-ui-core\\src\\src\\plugins\\system.js","dependencies":[{"path":"D:\\Project VMODEV\\Horde\\horde-oui\\oui-ui-core\\src\\src\\plugins\\system.js","mtime":1591674512000},{"path":"D:\\Project VMODEV\\Horde\\horde-oui\\oui-ui-core\\src\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Project VMODEV\\Horde\\horde-oui\\oui-ui-core\\src\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\Project VMODEV\\Horde\\horde-oui\\oui-ui-core\\src\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport { ubus } from \"./ubus\";\nexport var system = {};\n\nsystem.getSystemInfo = function () {\n  return new Promise(function (resolve) {\n    ubus.call('system', 'info').then(function (r) {\n      resolve(r);\n    });\n  });\n};\n\nsystem.getBoardInfo = function () {\n  return new Promise(function (resolve) {\n    ubus.call('system', 'board').then(function (r) {\n      resolve(r);\n    });\n  });\n};\n\nsystem.getDiskInfo = function () {\n  return new Promise(function (resolve) {\n    ubus.call('oui.system', 'diskfree').then(function (r) {\n      resolve(r);\n    });\n  });\n};\n\nsystem.getInfo = function () {\n  return new Promise(function (resolve) {\n    ubus.callBatch([['system', 'info'], ['system', 'board'], ['oui.system', 'diskfree']]).then(function (r) {\n      resolve(Object.assign({}, r[0], r[1], {\n        disk: r[2]\n      }));\n    });\n  });\n};\n\nsystem.initList = function () {\n  return new Promise(function (resolve) {\n    ubus.call('oui.system', 'init_list').then(function (r) {\n      resolve(r.initscripts);\n    });\n  });\n};\n\nsystem.initEnabled = function (name) {\n  var _this = this;\n\n  return new Promise(function (resolve) {\n    _this.initList().then(function (list) {\n      for (var i = 0; i < list.length; i++) {\n        if (list[i].name === name) {\n          resolve(list[i].enabled);\n          return;\n        }\n      }\n\n      resolve(false);\n    });\n  });\n};\n\nsystem.initRun = function (name, action) {\n  return ubus.call('oui.system', 'init_action', {\n    name: name,\n    action: action\n  });\n};\n\nsystem.initStart = function (name) {\n  return this.initRun(name, 'start');\n};\n\nsystem.initStop = function (name) {\n  return this.initRun(name, 'stop');\n};\n\nsystem.initRestart = function (name) {\n  return this.initRun(name, 'restart');\n};\n\nsystem.initWaitEnabled = function (name, expect, resolve) {\n  function check() {\n    var _this2 = this;\n\n    this.initEnabled(name).then(function (enabled) {\n      if (!!enabled === expect) {\n        resolve();\n        return;\n      }\n\n      setTimeout(function () {\n        check.call(_this2);\n      }, 500);\n    });\n  }\n\n  check.call(this);\n};\n\nsystem.initEnable = function (name) {\n  var _this3 = this;\n\n  return new Promise(function (resolve) {\n    _this3.initRun(name, 'enable').then(function () {\n      _this3.initWaitEnabled(name, true, resolve);\n    });\n  });\n};\n\nsystem.initDisable = function (name) {\n  var _this4 = this;\n\n  return new Promise(function (resolve) {\n    _this4.initRun(name, 'disable').then(function () {\n      _this4.initWaitEnabled(name, false, resolve);\n    });\n  });\n};\n\nsystem.setPassword = function (user, password) {\n  return ubus.call('rpc-sys', 'password_set', {\n    user: user,\n    password: password\n  });\n};\n\nsystem.reboot = function () {\n  return ubus.call('system', 'reboot');\n};\n\nexport default {\n  install: function install(Vue) {\n    Vue.prototype.$system = system;\n  }\n};",{"version":3,"sources":["D:\\Project VMODEV\\Horde\\horde-oui\\oui-ui-core\\src\\src\\plugins\\system.js"],"names":["ubus","system","getSystemInfo","Promise","resolve","call","then","r","getBoardInfo","getDiskInfo","getInfo","callBatch","Object","assign","disk","initList","initscripts","initEnabled","name","list","i","length","enabled","initRun","action","initStart","initStop","initRestart","initWaitEnabled","expect","check","setTimeout","initEnable","initDisable","setPassword","user","password","reboot","install","Vue","prototype","$system"],"mappings":"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","sourcesContent":["import {ubus} from './ubus'\n\nexport const system = {}\n\nsystem.getSystemInfo = function() {\n  return new Promise(resolve => {\n    ubus.call('system', 'info').then(r => {\n      resolve(r);\n    });\n  });\n}\n\nsystem.getBoardInfo = function() {\n  return new Promise(resolve => {\n    ubus.call('system', 'board').then(r => {\n      resolve(r);\n    });\n  });\n}\n\nsystem.getDiskInfo = function() {\n  return new Promise(resolve => {\n    ubus.call('oui.system', 'diskfree').then(r => {\n      resolve(r);\n    });\n  });\n}\n\nsystem.getInfo = function() {\n  return new Promise(resolve => {\n    ubus.callBatch([\n      ['system', 'info'],\n      ['system', 'board'],\n      ['oui.system', 'diskfree']\n    ]).then(r => {\n      resolve(Object.assign({}, r[0], r[1], {disk: r[2]}));\n    });\n  });\n}\n\nsystem.initList = function() {\n  return new Promise(resolve => {\n    ubus.call('oui.system', 'init_list').then(r => {\n      resolve(r.initscripts);\n    });\n  });\n}\n\nsystem.initEnabled = function(name) {\n  return new Promise(resolve => {\n    this.initList().then(list => {\n      for (let i = 0; i < list.length; i++) {\n        if (list[i].name === name) {\n          resolve(list[i].enabled);\n          return;\n        }\n      }\n      resolve(false);\n    });\n  });\n}\n\nsystem.initRun = function(name, action) {\n  return ubus.call('oui.system', 'init_action', {name, action});\n}\n\nsystem.initStart = function(name) {\n  return this.initRun(name, 'start');\n}\n\nsystem.initStop = function(name) {\n  return this.initRun(name, 'stop');\n}\n\nsystem.initRestart = function(name) {\n  return this.initRun(name, 'restart');\n}\n\nsystem.initWaitEnabled = function(name, expect, resolve) {\n  function check() {\n    this.initEnabled(name).then(enabled => {\n      if (!!enabled === expect) {\n        resolve();\n        return;\n      }\n\n      setTimeout(() => {\n        check.call(this);\n      }, 500);\n    });\n  }\n\n  check.call(this);\n}\n\nsystem.initEnable = function(name) {\n  return new Promise(resolve => {\n    this.initRun(name, 'enable').then(() => {\n      this.initWaitEnabled(name, true, resolve);\n    });\n  });\n}\n\nsystem.initDisable = function(name) {\n  return new Promise(resolve => {\n    this.initRun(name, 'disable').then(() => {\n      this.initWaitEnabled(name, false, resolve);\n    });\n  });\n}\n\nsystem.setPassword = function(user, password) {\n  return ubus.call('rpc-sys', 'password_set', {user, password})\n}\n\nsystem.reboot = function() {\n  return ubus.call('system', 'reboot')\n}\n\nexport default {\n  install(Vue) {\n    Vue.prototype.$system = system;\n  }\n}\n"]}]}